<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Transformations</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Transformations.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Transformations.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe</td></tr></table><p class="caption">Transformations</p></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">newtype</span> <a href="#t:Check">Check</a> a = <a href="#v:Check">Check</a> {<ul class="subs"><li><a href="#v:getCheck">getCheck</a> :: a -&gt; a -&gt; Bool</li></ul>}</li><li class="src short"><a href="#v:-60--61--62-">(&lt;=&gt;)</a> :: a -&gt; a -&gt; <a href="Transformations.html#t:Check">Check</a> a -&gt; Bool</li><li class="src short"><a href="#v:-62--36--60-">(&gt;$&lt;)</a> :: (a -&gt; b) -&gt; <a href="Transformations.html#t:Check">Check</a> b -&gt; <a href="Transformations.html#t:Check">Check</a> a</li><li class="src short"><a href="#v:-62--36-">(&gt;$)</a> :: (a -&gt; a) -&gt; <a href="Transformations.html#t:Check">Check</a> a -&gt; <a href="Transformations.html#t:Check">Check</a> a</li><li class="src short"><a href="#v:-36--60-">($&lt;)</a> :: (a -&gt; a) -&gt; <a href="Transformations.html#t:Check">Check</a> a -&gt; <a href="Transformations.html#t:Check">Check</a> a</li><li class="src short"><a href="#v:exactOf">exactOf</a> :: <a href="Transformations.html#t:Check">Check</a> <a href="Types.html#t:Pattern">Pattern</a></li><li class="src short"><a href="#v:transpositionOf">transpositionOf</a> :: <a href="Transformations.html#t:Check">Check</a> <a href="Types.html#t:Pattern">Pattern</a></li><li class="src short"><a href="#v:inversionOf">inversionOf</a> :: <a href="Transformations.html#t:Check">Check</a> <a href="Types.html#t:Pattern">Pattern</a></li><li class="src short"><a href="#v:retrogradeOf">retrogradeOf</a> :: <a href="Transformations.html#t:Check">Check</a> <a href="Types.html#t:Pattern">Pattern</a></li><li class="src short"><a href="#v:rotationOf">rotationOf</a> :: <a href="Transformations.html#t:Check">Check</a> <a href="Types.html#t:Pattern">Pattern</a></li><li class="src short"><a href="#v:augmentationOf">augmentationOf</a> :: <a href="Transformations.html#t:Check">Check</a> <a href="Types.html#t:Pattern">Pattern</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:Degree">Degree</a> = Integer</li><li class="src short"><span class="keyword">type</span> <a href="#t:Scale">Scale</a> = Map <a href="Types.html#t:MIDI">MIDI</a> <a href="Transformations.html#t:Degree">Degree</a></li><li class="src short"><a href="#v:tonalTranspOf">tonalTranspOf</a> :: <a href="Transformations.html#t:Check">Check</a> <a href="Types.html#t:Pattern">Pattern</a></li><li class="src short"><a href="#v:trInversionOf">trInversionOf</a> :: <a href="Transformations.html#t:Check">Check</a> <a href="Types.html#t:Pattern">Pattern</a></li><li class="src short"><a href="#v:trAugmentationOf">trAugmentationOf</a> :: <a href="Transformations.html#t:Check">Check</a> <a href="Types.html#t:Pattern">Pattern</a></li><li class="src short"><a href="#v:trRetrogradeOf">trRetrogradeOf</a> :: <a href="Transformations.html#t:Check">Check</a> <a href="Types.html#t:Pattern">Pattern</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:Interval">Interval</a> = Integer</li><li class="src short"><a href="#v:equal">equal</a> :: Eq a =&gt; <a href="Transformations.html#t:Check">Check</a> a</li><li class="src short"><a href="#v:approxEq">approxEq</a> :: Float -&gt; <a href="Transformations.html#t:Check">Check</a> <a href="Types.html#t:Pattern">Pattern</a></li><li class="src short"><a href="#v:inverse">inverse</a> :: Num a =&gt; [a] -&gt; [a]</li><li class="src short"><a href="#v:basePitch">basePitch</a> :: <a href="Types.html#t:Pattern">Pattern</a> -&gt; Maybe <a href="Types.html#t:MIDI">MIDI</a></li><li class="src short"><a href="#v:pitch">pitch</a> :: <a href="Types.html#t:Pattern">Pattern</a> -&gt; [<a href="Types.html#t:MIDI">MIDI</a>]</li><li class="src short"><a href="#v:intervals">intervals</a> :: <a href="Types.html#t:Pattern">Pattern</a> -&gt; [<a href="Transformations.html#t:Interval">Interval</a>]</li><li class="src short"><a href="#v:durations">durations</a> :: <a href="Types.html#t:Pattern">Pattern</a> -&gt; [<a href="Types.html#t:Time">Time</a>]</li><li class="src short"><a href="#v:rhythm">rhythm</a> :: <a href="Types.html#t:Pattern">Pattern</a> -&gt; [<a href="Types.html#t:Time">Time</a>]</li><li class="src short"><a href="#v:normalizeTime">normalizeTime</a> :: [<a href="Types.html#t:Time">Time</a>] -&gt; [<a href="Types.html#t:Time">Time</a>]</li><li class="src short"><a href="#v:normalRhythm">normalRhythm</a> :: <a href="Types.html#t:Pattern">Pattern</a> -&gt; [<a href="Types.html#t:Time">Time</a>]</li><li class="src short"><a href="#v:translateH">translateH</a> :: <a href="Types.html#t:Time">Time</a> -&gt; <a href="Types.html#t:Note">Note</a> -&gt; <a href="Types.html#t:Note">Note</a></li><li class="src short"><a href="#v:translateV">translateV</a> :: <a href="Transformations.html#t:Interval">Interval</a> -&gt; <a href="Types.html#t:Note">Note</a> -&gt; <a href="Types.html#t:Note">Note</a></li><li class="src short"><a href="#v:pairs">pairs</a> :: [a] -&gt; [(a, a)]</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:Check" class="def">Check</a> a <a href="src/Transformations.html#Check" class="link">Source</a> <a href="#t:Check" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Check" class="def">Check</a></td><td class="doc"><p>Checks two patterns (horizontal translation in time is always assumed).</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:getCheck" class="def">getCheck</a> :: a -&gt; a -&gt; Bool</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><p id="control.i:Check" class="caption collapser" onclick="toggleSection('i:Check')">Instances</p><div id="section.i:Check" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Check:Contravariant:1" class="instance expander" onclick="toggleSection('i:id:Check:Contravariant:1')"></span> Contravariant <a href="Transformations.html#t:Check">Check</a></span> <a href="src/Transformations.html#line-23" class="link">Source</a> <a href="#t:Check" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Check:Contravariant:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:contramap">contramap</a> :: (a -&gt; b) -&gt; <a href="Transformations.html#t:Check">Check</a> b -&gt; <a href="Transformations.html#t:Check">Check</a> a</p><p class="src"><a href="#v:-62--36-">(&gt;$)</a> :: b -&gt; <a href="Transformations.html#t:Check">Check</a> b -&gt; <a href="Transformations.html#t:Check">Check</a> a</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Check:Semigroup:2" class="instance expander" onclick="toggleSection('i:id:Check:Semigroup:2')"></span> Semigroup (<a href="Transformations.html#t:Check">Check</a> a)</span> <a href="src/Transformations.html#line-20" class="link">Source</a> <a href="#t:Check" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Check:Semigroup:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Transformations.html#t:Check">Check</a> a -&gt; <a href="Transformations.html#t:Check">Check</a> a -&gt; <a href="Transformations.html#t:Check">Check</a> a</p><p class="src"><a href="#v:sconcat">sconcat</a> :: NonEmpty (<a href="Transformations.html#t:Check">Check</a> a) -&gt; <a href="Transformations.html#t:Check">Check</a> a</p><p class="src"><a href="#v:stimes">stimes</a> :: Integral b =&gt; b -&gt; <a href="Transformations.html#t:Check">Check</a> a -&gt; <a href="Transformations.html#t:Check">Check</a> a</p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:-60--61--62-" class="def">(&lt;=&gt;)</a> :: a -&gt; a -&gt; <a href="Transformations.html#t:Check">Check</a> a -&gt; Bool <a href="src/Transformations.html#%3C%3D%3E" class="link">Source</a> <a href="#v:-60--61--62-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:-62--36--60-" class="def">(&gt;$&lt;)</a> :: (a -&gt; b) -&gt; <a href="Transformations.html#t:Check">Check</a> b -&gt; <a href="Transformations.html#t:Check">Check</a> a <span class="fixity">infix 7</span><span class="rightedge"></span> <a href="src/Transformations.html#%3E%24%3C" class="link">Source</a> <a href="#v:-62--36--60-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:-62--36-" class="def">(&gt;$)</a> :: (a -&gt; a) -&gt; <a href="Transformations.html#t:Check">Check</a> a -&gt; <a href="Transformations.html#t:Check">Check</a> a <span class="fixity">infix 8</span><span class="rightedge"></span> <a href="src/Transformations.html#%3E%24" class="link">Source</a> <a href="#v:-62--36-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:-36--60-" class="def">($&lt;)</a> :: (a -&gt; a) -&gt; <a href="Transformations.html#t:Check">Check</a> a -&gt; <a href="Transformations.html#t:Check">Check</a> a <span class="fixity">infix 8</span><span class="rightedge"></span> <a href="src/Transformations.html#%24%3C" class="link">Source</a> <a href="#v:-36--60-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:exactOf" class="def">exactOf</a> :: <a href="Transformations.html#t:Check">Check</a> <a href="Types.html#t:Pattern">Pattern</a> <a href="src/Transformations.html#exactOf" class="link">Source</a> <a href="#v:exactOf" class="selflink">#</a></p><div class="doc"><p>Exact repetition: move a pattern in time.
 (AKA horizontal translation)</p></div></div><div class="top"><p class="src"><a id="v:transpositionOf" class="def">transpositionOf</a> :: <a href="Transformations.html#t:Check">Check</a> <a href="Types.html#t:Pattern">Pattern</a> <a href="src/Transformations.html#transpositionOf" class="link">Source</a> <a href="#v:transpositionOf" class="selflink">#</a></p><div class="doc"><p>Transposition: move a pattern in pitch.
 (AKA horizontal+vertical translation)</p></div></div><div class="top"><p class="src"><a id="v:inversionOf" class="def">inversionOf</a> :: <a href="Transformations.html#t:Check">Check</a> <a href="Types.html#t:Pattern">Pattern</a> <a href="src/Transformations.html#inversionOf" class="link">Source</a> <a href="#v:inversionOf" class="selflink">#</a></p><div class="doc"><p>Inversion: negate all pitch intervals (starting from the same base pitch).</p></div></div><div class="top"><p class="src"><a id="v:retrogradeOf" class="def">retrogradeOf</a> :: <a href="Transformations.html#t:Check">Check</a> <a href="Types.html#t:Pattern">Pattern</a> <a href="src/Transformations.html#retrogradeOf" class="link">Source</a> <a href="#v:retrogradeOf" class="selflink">#</a></p><div class="doc"><p>Retrograde: mirror a pattern in both pitch and rhythm.
 (AKA vertical reflection)</p></div></div><div class="top"><p class="src"><a id="v:rotationOf" class="def">rotationOf</a> :: <a href="Transformations.html#t:Check">Check</a> <a href="Types.html#t:Pattern">Pattern</a> <a href="src/Transformations.html#rotationOf" class="link">Source</a> <a href="#v:rotationOf" class="selflink">#</a></p><div class="doc"><p>Rotation: reversal of pitch intervals and reversal of rhythm.
 (AKA retrograde inversion)</p></div></div><div class="top"><p class="src"><a id="v:augmentationOf" class="def">augmentationOf</a> :: <a href="Transformations.html#t:Check">Check</a> <a href="Types.html#t:Pattern">Pattern</a> <a href="src/Transformations.html#augmentationOf" class="link">Source</a> <a href="#v:augmentationOf" class="selflink">#</a></p><div class="doc"><p>Augmentation: speed-up/slow-down the rhythmic structure of a pattern.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Degree" class="def">Degree</a> = Integer <a href="src/Transformations.html#Degree" class="link">Source</a> <a href="#t:Degree" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Scale" class="def">Scale</a> = Map <a href="Types.html#t:MIDI">MIDI</a> <a href="Transformations.html#t:Degree">Degree</a> <a href="src/Transformations.html#Scale" class="link">Source</a> <a href="#t:Scale" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:tonalTranspOf" class="def">tonalTranspOf</a> :: <a href="Transformations.html#t:Check">Check</a> <a href="Types.html#t:Pattern">Pattern</a> <a href="src/Transformations.html#tonalTranspOf" class="link">Source</a> <a href="#v:tonalTranspOf" class="selflink">#</a></p><div class="doc"><p>Octave-agnostic tonal transposition, wrt a scale that <code>fits</code> the base pattern
 e.g. [I, IV, V] tonalTranspOf [III, VI, VII]</p></div></div><div class="top"><p class="src"><a id="v:trInversionOf" class="def">trInversionOf</a> :: <a href="Transformations.html#t:Check">Check</a> <a href="Types.html#t:Pattern">Pattern</a> <a href="src/Transformations.html#trInversionOf" class="link">Source</a> <a href="#v:trInversionOf" class="selflink">#</a></p><div class="doc"><p>Transposition + Inversion.
 (AKA horizontal reflection)</p></div></div><div class="top"><p class="src"><a id="v:trAugmentationOf" class="def">trAugmentationOf</a> :: <a href="Transformations.html#t:Check">Check</a> <a href="Types.html#t:Pattern">Pattern</a> <a href="src/Transformations.html#trAugmentationOf" class="link">Source</a> <a href="#v:trAugmentationOf" class="selflink">#</a></p><div class="doc"><p>Transposition + Augmentation.</p></div></div><div class="top"><p class="src"><a id="v:trRetrogradeOf" class="def">trRetrogradeOf</a> :: <a href="Transformations.html#t:Check">Check</a> <a href="Types.html#t:Pattern">Pattern</a> <a href="src/Transformations.html#trRetrogradeOf" class="link">Source</a> <a href="#v:trRetrogradeOf" class="selflink">#</a></p><div class="doc"><p>Transposition + Retrograde.
 (AKA vertical glide reflection)</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Interval" class="def">Interval</a> = Integer <a href="src/Transformations.html#Interval" class="link">Source</a> <a href="#t:Interval" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:equal" class="def">equal</a> :: Eq a =&gt; <a href="Transformations.html#t:Check">Check</a> a <a href="src/Transformations.html#equal" class="link">Source</a> <a href="#v:equal" class="selflink">#</a></p><div class="doc"><p>Check that two elements are exactly equal (using <code>eq</code>).
 e.g. [a, c, b] equal [a, c, b]</p></div></div><div class="top"><p class="src"><a id="v:approxEq" class="def">approxEq</a> :: Float -&gt; <a href="Transformations.html#t:Check">Check</a> <a href="Types.html#t:Pattern">Pattern</a> <a href="src/Transformations.html#approxEq" class="link">Source</a> <a href="#v:approxEq" class="selflink">#</a></p><div class="doc"><p>Check that two patterns are approximately equal, wrt a certain percentage.
 A base pattern and an occurence are approximately equal with percentage <code>p</code> when:
    1. The occurence ignores (1-p)% notes of the base pattern
    2. (1-p)% notes of the occurence are additional notes (not in the base pattern)
 e.g. [A,C,F,A,B] (approxEq 80%) [A,C,G,A,B]</p></div></div><div class="top"><p class="src"><a id="v:inverse" class="def">inverse</a> :: Num a =&gt; [a] -&gt; [a] <a href="src/Transformations.html#inverse" class="link">Source</a> <a href="#v:inverse" class="selflink">#</a></p><div class="doc"><p>Negate the values of a numeric list.</p></div></div><div class="top"><p class="src"><a id="v:basePitch" class="def">basePitch</a> :: <a href="Types.html#t:Pattern">Pattern</a> -&gt; Maybe <a href="Types.html#t:MIDI">MIDI</a> <a href="src/Transformations.html#basePitch" class="link">Source</a> <a href="#v:basePitch" class="selflink">#</a></p><div class="doc"><p>The base pitch of a pattern (the pitch of its first note).
 e.g. basePitch [(25,1), (27,2), (25,2.5)] = Just 25</p></div></div><div class="top"><p class="src"><a id="v:pitch" class="def">pitch</a> :: <a href="Types.html#t:Pattern">Pattern</a> -&gt; [<a href="Types.html#t:MIDI">MIDI</a>] <a href="src/Transformations.html#pitch" class="link">Source</a> <a href="#v:pitch" class="selflink">#</a></p><div class="doc"><p>The (real) pitch structure of a pattern.
 e.g. pitch [(25,1), (27,2), (25,2.5)] = [25, 27, 25]</p></div></div><div class="top"><p class="src"><a id="v:intervals" class="def">intervals</a> :: <a href="Types.html#t:Pattern">Pattern</a> -&gt; [<a href="Transformations.html#t:Interval">Interval</a>] <a href="src/Transformations.html#intervals" class="link">Source</a> <a href="#v:intervals" class="selflink">#</a></p><div class="doc"><p>The (relative) pitch structure of a pattern.
 e.g. intervals [(25,1), (27,2), (25,2.5)] = [2, -2]</p></div></div><div class="top"><p class="src"><a id="v:durations" class="def">durations</a> :: <a href="Types.html#t:Pattern">Pattern</a> -&gt; [<a href="Types.html#t:Time">Time</a>] <a href="src/Transformations.html#durations" class="link">Source</a> <a href="#v:durations" class="selflink">#</a></p><div class="doc"><p>The (real) rhythmic structure of a pattern.
 e.g. durations [(25,1), (27,2), (25,2.5)] = [1, 2, 2.5]</p></div></div><div class="top"><p class="src"><a id="v:rhythm" class="def">rhythm</a> :: <a href="Types.html#t:Pattern">Pattern</a> -&gt; [<a href="Types.html#t:Time">Time</a>] <a href="src/Transformations.html#rhythm" class="link">Source</a> <a href="#v:rhythm" class="selflink">#</a></p><div class="doc"><p>The (relative) rhythmic structure of a pattern.
 e.g. rhythm [(25,1), (27,2), (25,2.5)] = [1, 1.5]</p></div></div><div class="top"><p class="src"><a id="v:normalizeTime" class="def">normalizeTime</a> :: [<a href="Types.html#t:Time">Time</a>] -&gt; [<a href="Types.html#t:Time">Time</a>] <a href="src/Transformations.html#normalizeTime" class="link">Source</a> <a href="#v:normalizeTime" class="selflink">#</a></p><div class="doc"><p>Convert times to ratios wrt the first time unit used.
 e.g. normalizeTime [2, 6, 8, 6, 1, 2] = [1, 3, 4, 1/2, 1]</p></div></div><div class="top"><p class="src"><a id="v:normalRhythm" class="def">normalRhythm</a> :: <a href="Types.html#t:Pattern">Pattern</a> -&gt; [<a href="Types.html#t:Time">Time</a>] <a href="src/Transformations.html#normalRhythm" class="link">Source</a> <a href="#v:normalRhythm" class="selflink">#</a></p><div class="doc"><p>Normalized (relative) rhythmic structure of a pattern.
 e.g. normalRhythm [(A,2), (C#,6), (Eb,8), (B,1), (A,2)] = [1, 3, 4, 1/2, 1]</p></div></div><div class="top"><p class="src"><a id="v:translateH" class="def">translateH</a> :: <a href="Types.html#t:Time">Time</a> -&gt; <a href="Types.html#t:Note">Note</a> -&gt; <a href="Types.html#t:Note">Note</a> <a href="src/Transformations.html#translateH" class="link">Source</a> <a href="#v:translateH" class="selflink">#</a></p><div class="doc"><p>Translate a note horizontally (in time).
 e.g. translateH (-0.5) [(25,1), (27,2), (25,2.5)] = [(25,0.5), (27,1.5), (25,2)]</p></div></div><div class="top"><p class="src"><a id="v:translateV" class="def">translateV</a> :: <a href="Transformations.html#t:Interval">Interval</a> -&gt; <a href="Types.html#t:Note">Note</a> -&gt; <a href="Types.html#t:Note">Note</a> <a href="src/Transformations.html#translateV" class="link">Source</a> <a href="#v:translateV" class="selflink">#</a></p><div class="doc"><p>Translate a note vertically (in pitch).
 e.g. translateV (-20) [(25,1), (27,2), (25,2.5)] = [(5,1), (7,2), (5,2.5)]</p></div></div><div class="top"><p class="src"><a id="v:pairs" class="def">pairs</a> :: [a] -&gt; [(a, a)] <a href="src/Transformations.html#pairs" class="link">Source</a> <a href="#v:pairs" class="selflink">#</a></p><div class="doc"><p>Get list as pairs of consecutive elements.
 e.g. pairs [a, b, c, d] = [(a, b), (b, c), (c, d)]</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>